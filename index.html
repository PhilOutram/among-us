<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Among Us</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splashScreen" class="screen active">
        <img src="assets/SplashcreenAgentHQ.png" alt="Among Us" class="splash-image">
        <h1 class="game-title-splash">AMONG US</h1>
        <button id="btnPlay" class="btn-play">
            <img src="assets/BtnPlay.png" alt="Play">
        </button>
        <div class="version-label">v1.0</div>
    </div>

    <!-- Start Screen - Create or Join -->
    <div id="startScreen" class="screen">
        <img src="assets/SplashcreenAgentHQ.png" class="background-image">
        <div class="screen-content">
            <h1 class="game-title">AMONG US</h1>
            <div class="button-stack">
                <button id="btnJoin" class="btn-image">
                    <img src="assets/btnJoin.png" alt="Join Game">
                </button>
                <button id="btnCreate" class="btn-image">
                    <img src="assets/btnCreate.png" alt="Create Game">
                </button>
            </div>
        </div>
    </div>

    <!-- Create Game Screen (Host) -->
    <div id="createScreen" class="screen">
        <img src="assets/SplashcreenAgentHQ.png" class="background-image">
        <div class="screen-content">
            <div class="status-message" id="createStatus">Creating game...</div>
            <div class="game-code-box">
                <div class="label">GAME CODE:</div>
                <div class="code-display" id="gameCode">----</div>
            </div>
            <div class="players-box">
                <div class="label">PLAYERS:</div>
                <div class="players-list" id="playersList">Waiting for players...</div>
            </div>
            <button id="btnStartGame" class="btn-image" disabled>
                <img src="assets/btnStart.png" alt="Start Game">
            </button>
        </div>
    </div>

    <!-- Join Game Screen -->
    <div id="joinScreen" class="screen">
        <img src="assets/SplashcreenAgentHQ.png" class="background-image">
        <div class="screen-content">
            <div class="label">Enter Game Code:</div>
            <input type="text" id="joinCodeInput" class="code-input" maxlength="4" placeholder="----">
            <button id="btnJoinConfirm" class="btn-primary">JOIN GAME</button>
            <div class="status-message" id="joinStatus"></div>
        </div>
    </div>

    <!-- Waiting Room (for joined players) -->
    <div id="waitingScreen" class="screen">
        <img src="assets/SplashcreenAgentHQ.png" class="background-image">
        <div class="screen-content">
            <div class="game-code-box">
                <div class="label">GAME CODE:</div>
                <div class="code-display" id="waitingCode">----</div>
            </div>
            <div class="players-box">
                <div class="label">PLAYERS:</div>
                <div class="players-list" id="waitingPlayersList">Loading...</div>
            </div>
            <div class="status-message">Waiting for host to start game...</div>
        </div>
    </div>

    <!-- Role Reveal - Agent -->
    <div id="agentScreen" class="screen">
        <img src="assets/SplashcreenAgentHQ.png" class="background-image">
        <div class="screen-content role-reveal">
            <img src="assets/Agent.png" alt="Agent" class="role-image">
            <h1 class="role-title agent-title">AGENT</h1>
            <p class="role-description">Complete all GREEN tasks before time runs out!</p>
            <button id="btnAgentContinue" class="btn-primary">CONTINUE</button>
        </div>
    </div>

    <!-- Role Reveal - Cyborg -->
    <div id="cyborgScreen" class="screen">
        <img src="assets/SplashcreenAgentHQ.png" class="background-image">
        <div class="screen-content role-reveal">
            <img src="assets/Cyborg.png" alt="Cyborg" class="role-image">
            <h1 class="role-title cyborg-title">CYBORG</h1>
            <p class="role-description">Sabotage by completing RED tasks or let the timer run out!</p>
            <div class="cyborg-team">
                <div class="label">Fellow Cyborgs:</div>
                <div id="cyborgTeamList"></div>
            </div>
            <button id="btnCyborgContinue" class="btn-primary">CONTINUE</button>
        </div>
    </div>

    <!-- Main Game Screen -->
    <div id="gameScreen" class="screen">
        <img src="assets/SplashcreenAgentHQ.png" class="background-image">
        <div class="game-layout">
            <!-- Left Panel - Tasks -->
            <div class="tasks-panel">
                <div class="panel-title">TASKS</div>
                <div class="tasks-grid">
                    <!-- Task 1 -->
                    <button id="btnTask1GRN" class="task-btn task-grn" data-task="1" data-type="GRN">
                        <img src="assets/1_GRN_OFF.png" alt="Task 1 Green">
                    </button>
                    <button id="btnTask1RED" class="task-btn task-red" data-task="1" data-type="RED">
                        <img src="assets/1_RED_OFF.png" alt="Task 1 Red">
                    </button>
                    
                    <!-- Task 2 -->
                    <button id="btnTask2GRN" class="task-btn task-grn" data-task="2" data-type="GRN">
                        <img src="assets/2_GRN_OFF.png" alt="Task 2 Green">
                    </button>
                    <button id="btnTask2RED" class="task-btn task-red" data-task="2" data-type="RED">
                        <img src="assets/2_RED_OFF.png" alt="Task 2 Red">
                    </button>
                    
                    <!-- Task 3 -->
                    <button id="btnTask3GRN" class="task-btn task-grn" data-task="3" data-type="GRN">
                        <img src="assets/3_GRN_OFF.png" alt="Task 3 Green">
                    </button>
                    <button id="btnTask3RED" class="task-btn task-red" data-task="3" data-type="RED">
                        <img src="assets/3_RED_OFF.png" alt="Task 3 Red">
                    </button>
                    
                    <!-- Task 4 -->
                    <button id="btnTask4GRN" class="task-btn task-grn" data-task="4" data-type="GRN">
                        <img src="assets/4_GRN_OFF.png" alt="Task 4 Green">
                    </button>
                    <button id="btnTask4RED" class="task-btn task-red" data-task="4" data-type="RED">
                        <img src="assets/4_RED_OFF.png" alt="Task 4 Red">
                    </button>
                    
                    <!-- Task 5 -->
                    <button id="btnTask5GRN" class="task-btn task-grn" data-task="5" data-type="GRN">
                        <img src="assets/5_GRN_OFF.png" alt="Task 5 Green">
                    </button>
                    <button id="btnTask5RED" class="task-btn task-red" data-task="5" data-type="RED">
                        <img src="assets/5_RED_OFF.png" alt="Task 5 Red">
                    </button>
                </div>
                <button id="btnReset" class="btn-image" style="display: none;">
                    <img src="assets/btnReset.png" alt="Reset">
                </button>
            </div>

            <!-- Right Panel - Info & Actions -->
            <div class="info-panel">
                <div class="panel-title">TIMER</div>
                <div class="timer-display" id="timerDisplay">10:00</div>
                
                <div class="spacer"></div>
                
                <div class="panel-title">STATUS</div>
                <div class="status-display" id="statusDisplay">Game in progress...</div>
                
                <div class="spacer"></div>
                
                <button id="btnCallMeeting" class="btn-image">
                    <img src="assets/btnTeamMeeting.png" alt="Team Meeting">
                </button>
            </div>
        </div>

        <!-- Bottom Actions -->
        <div class="bottom-actions">
            <button id="btnExposed" class="btn-image">
                <img src="assets/btnExposed.png" alt="Exposed">
            </button>
        </div>
    </div>

    <!-- Team Meeting Screen -->
    <div id="meetingScreen" class="screen">
        <img src="assets/SplashcreenAgentHQ.png" class="background-image">
        <div class="screen-content">
            <h2>TEAM MEETING</h2>
            <img src="assets/TeamAlert.png" alt="Team Alert" class="alert-image">
            <p class="meeting-text">Discuss who might be the Cyborg!</p>
            <div class="players-list" id="meetingPlayersList"></div>
            <button id="btnEndMeeting" class="btn-primary">END MEETING</button>
        </div>
    </div>

    <!-- Exposed Screen -->
    <div id="exposedScreen" class="screen">
        <img src="assets/SplashcreenAgentHQ.png" class="background-image">
        <div class="screen-content">
            <h2>EXPOSE A PLAYER</h2>
            <p>Select a player to reveal their role:</p>
            <div class="players-grid" id="exposedPlayersList"></div>
            <button id="btnCancelExpose" class="btn-secondary">CANCEL</button>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="screen">
        <img src="assets/SplashcreenAgentHQ.png" class="background-image">
        <div class="screen-content">
            <h1 id="winnerTitle" class="game-over-title"></h1>
            <div id="winnerDetails" class="winner-details"></div>
            <div class="final-players" id="finalPlayers"></div>
            <button id="btnNewGame" class="btn-primary">NEW GAME</button>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="sndClick"><source src="assets/Click.wav"></audio>
    <audio id="sndBeep"><source src="assets/Beep.mp3"></audio>
    <audio id="sndExplosion"><source src="assets/Atomic_Bomb-Sound_Explorer-897730679.mp3"></audio>
    <audio id="sndSiren"><source src="assets/Siren_Noise-KevanGC-1337458893.mp3"></audio>
    <audio id="sndDestroy"><source src="assets/Iwilldestroyyou.mp3"></audio>
    <audio id="bgMusic" loop><source src="assets/Darkambientmusic.mp3"></audio>

    <!-- Notification Toast -->
    <div id="notification" class="notification hidden"></div>

    <!-- Help Button (top right) -->
    <button id="helpButton" class="help-button hidden" title="Help & Instructions">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
        </svg>
    </button>

    <!-- Emergency Reset Button (top left) -->
    <button id="emergencyReset" class="emergency-reset hidden" title="Reset/Quit Game">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
            <path d="M21 3v5h-5"/>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
            <path d="M3 21v-5h5"/>
        </svg>
    </button>

    <!-- Help Dialog -->
    <div id="helpDialog" class="dialog-overlay hidden">
        <div class="dialog-box">
            <h2>HOW TO PLAY</h2>
            <div class="help-content">
                <h3>üéØ Objective</h3>
                <p><strong>Agents:</strong> Complete all 5 GREEN tasks before time runs out</p>
                <p><strong>Cyborgs:</strong> Sabotage by completing RED tasks OR let timer hit 0:00</p>
                
                <h3>‚è±Ô∏è The Timer</h3>
                <p>You have 10 minutes. When it hits 0:00, Cyborgs win!</p>
                
                <h3>üîß The Tasks</h3>
                <p>‚Ä¢ 5 tasks with GREEN (Agent) and RED (Cyborg) buttons</p>
                <p>‚Ä¢ Click your colored button to complete/sabotage tasks</p>
                <p>‚Ä¢ Task lights show completion status to all players</p>
                
                <h3>ü§ù Team Meetings</h3>
                <p>Call a meeting to discuss and pause the timer</p>
                
                <h3>üîç Expose</h3>
                <p>Reveal a player's role - use wisely!</p>
                
                <h3>üèÜ Win Conditions</h3>
                <p><strong>Agents Win:</strong> All 5 GREEN tasks complete OR all Cyborgs exposed</p>
                <p><strong>Cyborgs Win:</strong> Timer hits 0:00 OR all 5 RED tasks complete</p>
            </div>
            <button id="closeHelp" class="btn-primary">GOT IT</button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p>Connecting...</p>
    </div>

    <!-- Reconnect Dialog -->
    <div id="reconnectDialog" class="dialog-overlay hidden">
        <div class="dialog-box">
            <h2>Game In Progress</h2>
            <p id="reconnectMessage" class="dialog-message"></p>
            <div class="dialog-buttons">
                <button id="btnReconnectYes" class="btn-primary">YES</button>
                <button id="btnReconnectNo" class="btn-secondary">NO, START NEW GAME</button>
            </div>
        </div>
    </div>

    <!-- Audio Elements -->
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
